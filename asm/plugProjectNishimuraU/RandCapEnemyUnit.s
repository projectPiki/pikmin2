.include "macros.inc"

.section .text, "ax"  # 0x800056C0 - 0x80472F00
.global __ct__Q34Game4Cave16RandCapEnemyUnitFPQ34Game4Cave16MapUnitGenerator
__ct__Q34Game4Cave16RandCapEnemyUnitFPQ34Game4Cave16MapUnitGenerator:
/* 80300E68 002FDDA8  90 83 00 00 */	stw r4, 0(r3)
/* 80300E6C 002FDDAC  38 00 00 00 */	li r0, 0
/* 80300E70 002FDDB0  80 83 00 00 */	lwz r4, 0(r3)
/* 80300E74 002FDDB4  80 84 00 18 */	lwz r4, 0x18(r4)
/* 80300E78 002FDDB8  90 83 00 08 */	stw r4, 8(r3)
/* 80300E7C 002FDDBC  80 83 00 00 */	lwz r4, 0(r3)
/* 80300E80 002FDDC0  80 84 00 1C */	lwz r4, 0x1c(r4)
/* 80300E84 002FDDC4  90 83 00 0C */	stw r4, 0xc(r3)
/* 80300E88 002FDDC8  90 03 00 10 */	stw r0, 0x10(r3)
/* 80300E8C 002FDDCC  90 03 00 14 */	stw r0, 0x14(r3)
/* 80300E90 002FDDD0  4E 80 00 20 */	blr 

.global setManageClassPtr__Q34Game4Cave16RandCapEnemyUnitFPQ34Game4Cave12RandItemUnit
setManageClassPtr__Q34Game4Cave16RandCapEnemyUnitFPQ34Game4Cave12RandItemUnit:
/* 80300E94 002FDDD4  90 83 00 04 */	stw r4, 4(r3)
/* 80300E98 002FDDD8  4E 80 00 20 */	blr 

.global setCapEnemySlot__Q34Game4Cave16RandCapEnemyUnitFv
setCapEnemySlot__Q34Game4Cave16RandCapEnemyUnitFv:
/* 80300E9C 002FDDDC  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80300EA0 002FDDE0  7C 08 02 A6 */	mflr r0
/* 80300EA4 002FDDE4  90 01 00 24 */	stw r0, 0x24(r1)
/* 80300EA8 002FDDE8  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80300EAC 002FDDEC  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80300EB0 002FDDF0  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80300EB4 002FDDF4  7C 7D 1B 78 */	mr r29, r3
/* 80300EB8 002FDDF8  80 63 00 00 */	lwz r3, 0(r3)
/* 80300EBC 002FDDFC  83 E3 00 28 */	lwz r31, 0x28(r3)
/* 80300EC0 002FDE00  83 DF 00 10 */	lwz r30, 0x10(r31)
/* 80300EC4 002FDE04  48 00 00 58 */	b lbl_80300F1C
lbl_80300EC8:
/* 80300EC8 002FDE08  80 7E 00 18 */	lwz r3, 0x18(r30)
/* 80300ECC 002FDE0C  4B F4 1C AD */	bl getUnitKind__Q34Game4Cave8UnitInfoFv
/* 80300ED0 002FDE10  2C 03 00 00 */	cmpwi r3, 0
/* 80300ED4 002FDE14  40 82 00 44 */	bne lbl_80300F18
/* 80300ED8 002FDE18  7F C3 F3 78 */	mr r3, r30
/* 80300EDC 002FDE1C  4B F4 2A E9 */	bl getUnitName__Q34Game4Cave7MapNodeFv
/* 80300EE0 002FDE20  38 82 F1 60 */	addi r4, r2, lbl_8051D4C0@sda21
/* 80300EE4 002FDE24  38 A0 00 04 */	li r5, 4
/* 80300EE8 002FDE28  4B DC 97 99 */	bl strncmp
/* 80300EEC 002FDE2C  2C 03 00 00 */	cmpwi r3, 0
/* 80300EF0 002FDE30  40 82 00 28 */	bne lbl_80300F18
/* 80300EF4 002FDE34  80 7D 00 04 */	lwz r3, 4(r29)
/* 80300EF8 002FDE38  7F C4 F3 78 */	mr r4, r30
/* 80300EFC 002FDE3C  4B F4 D7 11 */	bl isGroundCapEnemySetDone__Q34Game4Cave12RandItemUnitFPQ34Game4Cave7MapNode
/* 80300F00 002FDE40  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 80300F04 002FDE44  40 82 00 14 */	bne lbl_80300F18
/* 80300F08 002FDE48  7F A3 EB 78 */	mr r3, r29
/* 80300F0C 002FDE4C  7F C4 F3 78 */	mr r4, r30
/* 80300F10 002FDE50  38 A0 00 00 */	li r5, 0
/* 80300F14 002FDE54  48 00 00 91 */	bl setCapCommonEnemySlot__Q34Game4Cave16RandCapEnemyUnitFPQ34Game4Cave7MapNodei
lbl_80300F18:
/* 80300F18 002FDE58  83 DE 00 04 */	lwz r30, 4(r30)
lbl_80300F1C:
/* 80300F1C 002FDE5C  28 1E 00 00 */	cmplwi r30, 0
/* 80300F20 002FDE60  40 82 FF A8 */	bne lbl_80300EC8
/* 80300F24 002FDE64  83 DF 00 10 */	lwz r30, 0x10(r31)
/* 80300F28 002FDE68  48 00 00 58 */	b lbl_80300F80
lbl_80300F2C:
/* 80300F2C 002FDE6C  80 7E 00 18 */	lwz r3, 0x18(r30)
/* 80300F30 002FDE70  4B F4 1C 49 */	bl getUnitKind__Q34Game4Cave8UnitInfoFv
/* 80300F34 002FDE74  2C 03 00 00 */	cmpwi r3, 0
/* 80300F38 002FDE78  40 82 00 44 */	bne lbl_80300F7C
/* 80300F3C 002FDE7C  7F C3 F3 78 */	mr r3, r30
/* 80300F40 002FDE80  4B F4 2A 85 */	bl getUnitName__Q34Game4Cave7MapNodeFv
/* 80300F44 002FDE84  38 82 F1 60 */	addi r4, r2, lbl_8051D4C0@sda21
/* 80300F48 002FDE88  38 A0 00 04 */	li r5, 4
/* 80300F4C 002FDE8C  4B DC 97 35 */	bl strncmp
/* 80300F50 002FDE90  2C 03 00 00 */	cmpwi r3, 0
/* 80300F54 002FDE94  40 82 00 28 */	bne lbl_80300F7C
/* 80300F58 002FDE98  80 7D 00 04 */	lwz r3, 4(r29)
/* 80300F5C 002FDE9C  7F C4 F3 78 */	mr r4, r30
/* 80300F60 002FDEA0  4B F4 D7 95 */	bl isFallCapEnemySetDone__Q34Game4Cave12RandItemUnitFPQ34Game4Cave7MapNode
/* 80300F64 002FDEA4  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 80300F68 002FDEA8  40 82 00 14 */	bne lbl_80300F7C
/* 80300F6C 002FDEAC  7F A3 EB 78 */	mr r3, r29
/* 80300F70 002FDEB0  7F C4 F3 78 */	mr r4, r30
/* 80300F74 002FDEB4  38 A0 00 01 */	li r5, 1
/* 80300F78 002FDEB8  48 00 00 2D */	bl setCapCommonEnemySlot__Q34Game4Cave16RandCapEnemyUnitFPQ34Game4Cave7MapNodei
lbl_80300F7C:
/* 80300F7C 002FDEBC  83 DE 00 04 */	lwz r30, 4(r30)
lbl_80300F80:
/* 80300F80 002FDEC0  28 1E 00 00 */	cmplwi r30, 0
/* 80300F84 002FDEC4  40 82 FF A8 */	bne lbl_80300F2C
/* 80300F88 002FDEC8  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80300F8C 002FDECC  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80300F90 002FDED0  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80300F94 002FDED4  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80300F98 002FDED8  7C 08 03 A6 */	mtlr r0
/* 80300F9C 002FDEDC  38 21 00 20 */	addi r1, r1, 0x20
/* 80300FA0 002FDEE0  4E 80 00 20 */	blr 

.global setCapCommonEnemySlot__Q34Game4Cave16RandCapEnemyUnitFPQ34Game4Cave7MapNodei
setCapCommonEnemySlot__Q34Game4Cave16RandCapEnemyUnitFPQ34Game4Cave7MapNodei:
/* 80300FA4 002FDEE4  94 21 FF C0 */	stwu r1, -0x40(r1)
/* 80300FA8 002FDEE8  7C 08 02 A6 */	mflr r0
/* 80300FAC 002FDEEC  90 01 00 44 */	stw r0, 0x44(r1)
/* 80300FB0 002FDEF0  38 00 00 00 */	li r0, 0
/* 80300FB4 002FDEF4  BF 21 00 24 */	stmw r25, 0x24(r1)
/* 80300FB8 002FDEF8  7C BD 2B 78 */	mr r29, r5
/* 80300FBC 002FDEFC  57 A6 10 3A */	slwi r6, r29, 2
/* 80300FC0 002FDF00  7C 7B 1B 78 */	mr r27, r3
/* 80300FC4 002FDF04  7F FB 32 14 */	add r31, r27, r6
/* 80300FC8 002FDF08  3C A0 66 66 */	lis r5, 0x66666667@ha
/* 80300FCC 002FDF0C  7C 9C 23 78 */	mr r28, r4
/* 80300FD0 002FDF10  39 86 00 10 */	addi r12, r6, 0x10
/* 80300FD4 002FDF14  39 45 66 67 */	addi r10, r5, 0x66666667@l
/* 80300FD8 002FDF18  3B C0 00 00 */	li r30, 0
/* 80300FDC 002FDF1C  80 7F 00 08 */	lwz r3, 8(r31)
/* 80300FE0 002FDF20  83 23 00 10 */	lwz r25, 0x10(r3)
/* 80300FE4 002FDF24  48 00 00 90 */	b lbl_80301074
lbl_80300FE8:
/* 80300FE8 002FDF28  80 B9 00 18 */	lwz r5, 0x18(r25)
/* 80300FEC 002FDF2C  81 65 00 00 */	lwz r11, 0(r5)
/* 80300FF0 002FDF30  28 0B 00 00 */	cmplwi r11, 0
/* 80300FF4 002FDF34  41 82 00 7C */	beq lbl_80301070
/* 80300FF8 002FDF38  83 4B 00 1C */	lwz r26, 0x1c(r11)
/* 80300FFC 002FDF3C  7C 7B 60 2E */	lwzx r3, r27, r12
/* 80301000 002FDF40  7C 8A D0 96 */	mulhw r4, r10, r26
/* 80301004 002FDF44  7C 88 16 70 */	srawi r8, r4, 2
/* 80301008 002FDF48  7C 84 16 70 */	srawi r4, r4, 2
/* 8030100C 002FDF4C  54 87 0F FE */	srwi r7, r4, 0x1f
/* 80301010 002FDF50  55 09 0F FE */	srwi r9, r8, 0x1f
/* 80301014 002FDF54  7C 84 3A 14 */	add r4, r4, r7
/* 80301018 002FDF58  7C E8 4A 14 */	add r7, r8, r9
/* 8030101C 002FDF5C  1C 84 00 0A */	mulli r4, r4, 0xa
/* 80301020 002FDF60  7C 00 3A 14 */	add r0, r0, r7
/* 80301024 002FDF64  7C 84 D0 50 */	subf r4, r4, r26
/* 80301028 002FDF68  7C 00 18 00 */	cmpw r0, r3
/* 8030102C 002FDF6C  7F DE 22 14 */	add r30, r30, r4
/* 80301030 002FDF70  40 81 00 40 */	ble lbl_80301070
/* 80301034 002FDF74  80 6B 00 20 */	lwz r3, 0x20(r11)
/* 80301038 002FDF78  38 E0 00 01 */	li r7, 1
/* 8030103C 002FDF7C  2C 03 00 00 */	cmpwi r3, 0
/* 80301040 002FDF80  40 82 00 1C */	bne lbl_8030105C
/* 80301044 002FDF84  7C 7B 32 14 */	add r3, r27, r6
/* 80301048 002FDF88  80 63 00 10 */	lwz r3, 0x10(r3)
/* 8030104C 002FDF8C  7C 03 00 50 */	subf r0, r3, r0
/* 80301050 002FDF90  2C 00 00 01 */	cmpwi r0, 1
/* 80301054 002FDF94  40 81 00 08 */	ble lbl_8030105C
/* 80301058 002FDF98  38 E0 00 02 */	li r7, 2
lbl_8030105C:
/* 8030105C 002FDF9C  7F 63 DB 78 */	mr r3, r27
/* 80301060 002FDFA0  7F 84 E3 78 */	mr r4, r28
/* 80301064 002FDFA4  7F A6 EB 78 */	mr r6, r29
/* 80301068 002FDFA8  48 00 00 F9 */	bl setCapEnemy__Q34Game4Cave16RandCapEnemyUnitFPQ34Game4Cave7MapNodePQ34Game4Cave9EnemyUnitii
/* 8030106C 002FDFAC  48 00 00 E0 */	b lbl_8030114C
lbl_80301070:
/* 80301070 002FDFB0  83 39 00 04 */	lwz r25, 4(r25)
lbl_80301074:
/* 80301074 002FDFB4  28 19 00 00 */	cmplwi r25, 0
/* 80301078 002FDFB8  40 82 FF 70 */	bne lbl_80300FE8
/* 8030107C 002FDFBC  4B DC 85 25 */	bl rand
/* 80301080 002FDFC0  3C C0 43 30 */	lis r6, 0x4330
/* 80301084 002FDFC4  6C 60 80 00 */	xoris r0, r3, 0x8000
/* 80301088 002FDFC8  90 01 00 0C */	stw r0, 0xc(r1)
/* 8030108C 002FDFCC  6F C0 80 00 */	xoris r0, r30, 0x8000
/* 80301090 002FDFD0  80 BF 00 08 */	lwz r5, 8(r31)
/* 80301094 002FDFD4  3C 60 66 66 */	lis r3, 0x66666667@ha
/* 80301098 002FDFD8  90 C1 00 08 */	stw r6, 8(r1)
/* 8030109C 002FDFDC  38 83 66 67 */	addi r4, r3, 0x66666667@l
/* 803010A0 002FDFE0  C8 42 F1 70 */	lfd f2, lbl_8051D4D0@sda21(r2)
/* 803010A4 002FDFE4  39 20 00 00 */	li r9, 0
/* 803010A8 002FDFE8  C8 21 00 08 */	lfd f1, 8(r1)
/* 803010AC 002FDFEC  C0 02 F1 68 */	lfs f0, lbl_8051D4C8@sda21(r2)
/* 803010B0 002FDFF0  EC 21 10 28 */	fsubs f1, f1, f2
/* 803010B4 002FDFF4  90 01 00 14 */	stw r0, 0x14(r1)
/* 803010B8 002FDFF8  81 45 00 10 */	lwz r10, 0x10(r5)
/* 803010BC 002FDFFC  90 C1 00 10 */	stw r6, 0x10(r1)
/* 803010C0 002FE000  EC 21 00 24 */	fdivs f1, f1, f0
/* 803010C4 002FE004  C8 01 00 10 */	lfd f0, 0x10(r1)
/* 803010C8 002FE008  EC 00 10 28 */	fsubs f0, f0, f2
/* 803010CC 002FE00C  EC 00 00 72 */	fmuls f0, f0, f1
/* 803010D0 002FE010  FC 00 00 1E */	fctiwz f0, f0
/* 803010D4 002FE014  D8 01 00 18 */	stfd f0, 0x18(r1)
/* 803010D8 002FE018  80 E1 00 1C */	lwz r7, 0x1c(r1)
/* 803010DC 002FE01C  48 00 00 68 */	b lbl_80301144
lbl_803010E0:
/* 803010E0 002FE020  80 AA 00 18 */	lwz r5, 0x18(r10)
/* 803010E4 002FE024  81 05 00 00 */	lwz r8, 0(r5)
/* 803010E8 002FE028  28 08 00 00 */	cmplwi r8, 0
/* 803010EC 002FE02C  41 82 00 54 */	beq lbl_80301140
/* 803010F0 002FE030  80 C8 00 1C */	lwz r6, 0x1c(r8)
/* 803010F4 002FE034  7C 04 30 96 */	mulhw r0, r4, r6
/* 803010F8 002FE038  7C 00 16 70 */	srawi r0, r0, 2
/* 803010FC 002FE03C  54 03 0F FE */	srwi r3, r0, 0x1f
/* 80301100 002FE040  7C 00 1A 14 */	add r0, r0, r3
/* 80301104 002FE044  1C 00 00 0A */	mulli r0, r0, 0xa
/* 80301108 002FE048  7C 00 30 50 */	subf r0, r0, r6
/* 8030110C 002FE04C  7D 29 02 14 */	add r9, r9, r0
/* 80301110 002FE050  7C 09 38 00 */	cmpw r9, r7
/* 80301114 002FE054  40 81 00 2C */	ble lbl_80301140
/* 80301118 002FE058  80 08 00 20 */	lwz r0, 0x20(r8)
/* 8030111C 002FE05C  38 E0 00 01 */	li r7, 1
/* 80301120 002FE060  2C 00 00 00 */	cmpwi r0, 0
/* 80301124 002FE064  40 82 00 08 */	bne lbl_8030112C
/* 80301128 002FE068  38 E0 00 02 */	li r7, 2
lbl_8030112C:
/* 8030112C 002FE06C  7F 63 DB 78 */	mr r3, r27
/* 80301130 002FE070  7F 84 E3 78 */	mr r4, r28
/* 80301134 002FE074  7F A6 EB 78 */	mr r6, r29
/* 80301138 002FE078  48 00 00 29 */	bl setCapEnemy__Q34Game4Cave16RandCapEnemyUnitFPQ34Game4Cave7MapNodePQ34Game4Cave9EnemyUnitii
/* 8030113C 002FE07C  48 00 00 10 */	b lbl_8030114C
lbl_80301140:
/* 80301140 002FE080  81 4A 00 04 */	lwz r10, 4(r10)
lbl_80301144:
/* 80301144 002FE084  28 0A 00 00 */	cmplwi r10, 0
/* 80301148 002FE088  40 82 FF 98 */	bne lbl_803010E0
lbl_8030114C:
/* 8030114C 002FE08C  BB 21 00 24 */	lmw r25, 0x24(r1)
/* 80301150 002FE090  80 01 00 44 */	lwz r0, 0x44(r1)
/* 80301154 002FE094  7C 08 03 A6 */	mtlr r0
/* 80301158 002FE098  38 21 00 40 */	addi r1, r1, 0x40
/* 8030115C 002FE09C  4E 80 00 20 */	blr 

.global setCapEnemy__Q34Game4Cave16RandCapEnemyUnitFPQ34Game4Cave7MapNodePQ34Game4Cave9EnemyUnitii
setCapEnemy__Q34Game4Cave16RandCapEnemyUnitFPQ34Game4Cave7MapNodePQ34Game4Cave9EnemyUnitii:
/* 80301160 002FE0A0  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 80301164 002FE0A4  7C 08 02 A6 */	mflr r0
/* 80301168 002FE0A8  54 C6 10 3A */	slwi r6, r6, 2
/* 8030116C 002FE0AC  90 01 00 34 */	stw r0, 0x34(r1)
/* 80301170 002FE0B0  BF 21 00 14 */	stmw r25, 0x14(r1)
/* 80301174 002FE0B4  7C 79 1B 78 */	mr r25, r3
/* 80301178 002FE0B8  7C 9A 23 78 */	mr r26, r4
/* 8030117C 002FE0BC  7C BB 2B 78 */	mr r27, r5
/* 80301180 002FE0C0  7C FC 3B 78 */	mr r28, r7
/* 80301184 002FE0C4  3B C6 00 10 */	addi r30, r6, 0x10
/* 80301188 002FE0C8  3B A0 00 00 */	li r29, 0
/* 8030118C 002FE0CC  48 00 00 50 */	b lbl_803011DC
lbl_80301190:
/* 80301190 002FE0D0  38 60 00 38 */	li r3, 0x38
/* 80301194 002FE0D4  4B D2 2D 11 */	bl __nw__FUl
/* 80301198 002FE0D8  7C 7F 1B 79 */	or. r31, r3, r3
/* 8030119C 002FE0DC  41 82 00 18 */	beq lbl_803011B4
/* 803011A0 002FE0E0  7F 64 DB 78 */	mr r4, r27
/* 803011A4 002FE0E4  38 A0 00 00 */	li r5, 0
/* 803011A8 002FE0E8  38 C0 00 01 */	li r6, 1
/* 803011AC 002FE0EC  4B F4 30 1D */	bl __ct__Q34Game4Cave9EnemyNodeFPQ34Game4Cave9EnemyUnitPQ34Game4Cave7BaseGeni
/* 803011B0 002FE0F0  7C 7F 1B 78 */	mr r31, r3
lbl_803011B4:
/* 803011B4 002FE0F4  7F E3 FB 78 */	mr r3, r31
/* 803011B8 002FE0F8  7F 44 D3 78 */	mr r4, r26
/* 803011BC 002FE0FC  4B F4 30 A1 */	bl makeGlobalData__Q34Game4Cave9EnemyNodeFPQ34Game4Cave7MapNode
/* 803011C0 002FE100  80 7A 00 1C */	lwz r3, 0x1c(r26)
/* 803011C4 002FE104  7F E4 FB 78 */	mr r4, r31
/* 803011C8 002FE108  48 11 02 41 */	bl add__5CNodeFP5CNode
/* 803011CC 002FE10C  7C 79 F0 2E */	lwzx r3, r25, r30
/* 803011D0 002FE110  3B BD 00 01 */	addi r29, r29, 1
/* 803011D4 002FE114  38 03 00 01 */	addi r0, r3, 1
/* 803011D8 002FE118  7C 19 F1 2E */	stwx r0, r25, r30
lbl_803011DC:
/* 803011DC 002FE11C  7C 1D E0 00 */	cmpw r29, r28
/* 803011E0 002FE120  41 80 FF B0 */	blt lbl_80301190
/* 803011E4 002FE124  BB 21 00 14 */	lmw r25, 0x14(r1)
/* 803011E8 002FE128  80 01 00 34 */	lwz r0, 0x34(r1)
/* 803011EC 002FE12C  7C 08 03 A6 */	mtlr r0
/* 803011F0 002FE130  38 21 00 30 */	addi r1, r1, 0x30
/* 803011F4 002FE134  4E 80 00 20 */	blr 
