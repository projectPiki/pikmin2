.include "macros.inc"
.section .sdata, "wa"  # 0x80514680 - 0x80514D80
.balign 0x8
.global __GBAVersion
__GBAVersion:
	.4byte GBA_VERSION_STRING

.section .text, "ax"  # 0x800056C0 - 0x80472F00
.global ShortCommandProc
ShortCommandProc:
/* 800FEB2C 000FBA6C  3C 80 80 4F */	lis r4, __GBA@ha
/* 800FEB30 000FBA70  54 63 40 2E */	slwi r3, r3, 8
/* 800FEB34 000FBA74  38 04 75 C0 */	addi r0, r4, __GBA@l
/* 800FEB38 000FBA78  7C 60 1A 14 */	add r3, r0, r3
/* 800FEB3C 000FBA7C  80 03 00 20 */	lwz r0, 0x20(r3)
/* 800FEB40 000FBA80  2C 00 00 00 */	cmpwi r0, 0
/* 800FEB44 000FBA84  4C 82 00 20 */	bnelr 
/* 800FEB48 000FBA88  88 03 00 05 */	lbz r0, 5(r3)
/* 800FEB4C 000FBA8C  28 00 00 00 */	cmplwi r0, 0
/* 800FEB50 000FBA90  40 82 00 10 */	bne lbl_800FEB60
/* 800FEB54 000FBA94  88 03 00 06 */	lbz r0, 6(r3)
/* 800FEB58 000FBA98  28 00 00 04 */	cmplwi r0, 4
/* 800FEB5C 000FBA9C  41 82 00 10 */	beq lbl_800FEB6C
lbl_800FEB60:
/* 800FEB60 000FBAA0  38 00 00 01 */	li r0, 1
/* 800FEB64 000FBAA4  90 03 00 20 */	stw r0, 0x20(r3)
/* 800FEB68 000FBAA8  4E 80 00 20 */	blr 
lbl_800FEB6C:
/* 800FEB6C 000FBAAC  88 03 00 07 */	lbz r0, 7(r3)
/* 800FEB70 000FBAB0  80 63 00 14 */	lwz r3, 0x14(r3)
/* 800FEB74 000FBAB4  70 00 00 3A */	andi. r0, r0, 0x3a
/* 800FEB78 000FBAB8  98 03 00 00 */	stb r0, 0(r3)
/* 800FEB7C 000FBABC  4E 80 00 20 */	blr 

.global GBAInit
GBAInit:
/* 800FEB80 000FBAC0  7C 08 02 A6 */	mflr r0
/* 800FEB84 000FBAC4  90 01 00 04 */	stw r0, 4(r1)
/* 800FEB88 000FBAC8  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800FEB8C 000FBACC  BF 61 00 0C */	stmw r27, 0xc(r1)
/* 800FEB90 000FBAD0  80 0D 91 98 */	lwz r0, Initialized_1@sda21(r13)
/* 800FEB94 000FBAD4  2C 00 00 00 */	cmpwi r0, 0
/* 800FEB98 000FBAD8  40 82 00 94 */	bne lbl_800FEC2C
/* 800FEB9C 000FBADC  38 00 00 01 */	li r0, 1
/* 800FEBA0 000FBAE0  80 6D 83 B8 */	lwz r3, __GBAVersion@sda21(r13)
/* 800FEBA4 000FBAE4  90 0D 91 98 */	stw r0, Initialized_1@sda21(r13)
/* 800FEBA8 000FBAE8  4B FE CE E1 */	bl OSRegisterVersion
/* 800FEBAC 000FBAEC  3C 60 80 00 */	lis r3, 0x800000F8@ha
/* 800FEBB0 000FBAF0  80 03 00 F8 */	lwz r0, 0x800000F8@l(r3)
/* 800FEBB4 000FBAF4  3C 60 43 1C */	lis r3, 0x431BDE83@ha
/* 800FEBB8 000FBAF8  3C 80 80 4F */	lis r4, __GBA@ha
/* 800FEBBC 000FBAFC  54 00 F0 BE */	srwi r0, r0, 2
/* 800FEBC0 000FBB00  38 63 DE 83 */	addi r3, r3, 0x431BDE83@l
/* 800FEBC4 000FBB04  7C 03 00 16 */	mulhwu r0, r3, r0
/* 800FEBC8 000FBB08  54 00 8B FE */	srwi r0, r0, 0xf
/* 800FEBCC 000FBB0C  1C 00 00 3C */	mulli r0, r0, 0x3c
/* 800FEBD0 000FBB10  3C 60 80 4F */	lis r3, SecParams@ha
/* 800FEBD4 000FBB14  3B A4 75 C0 */	addi r29, r4, __GBA@l
/* 800FEBD8 000FBB18  3B 83 74 C0 */	addi r28, r3, SecParams@l
/* 800FEBDC 000FBB1C  54 1E E8 FE */	srwi r30, r0, 3
/* 800FEBE0 000FBB20  3B 60 00 00 */	li r27, 0
/* 800FEBE4 000FBB24  3B E0 00 00 */	li r31, 0
lbl_800FEBE8:
/* 800FEBE8 000FBB28  93 DD 00 34 */	stw r30, 0x34(r29)
/* 800FEBEC 000FBB2C  38 7D 00 24 */	addi r3, r29, 0x24
/* 800FEBF0 000FBB30  93 FD 00 30 */	stw r31, 0x30(r29)
/* 800FEBF4 000FBB34  4B FF 2D C1 */	bl OSInitThreadQueue
/* 800FEBF8 000FBB38  3B 7B 00 01 */	addi r27, r27, 1
/* 800FEBFC 000FBB3C  93 9D 00 F8 */	stw r28, 0xf8(r29)
/* 800FEC00 000FBB40  2C 1B 00 04 */	cmpwi r27, 4
/* 800FEC04 000FBB44  3B BD 01 00 */	addi r29, r29, 0x100
/* 800FEC08 000FBB48  3B 9C 00 40 */	addi r28, r28, 0x40
/* 800FEC0C 000FBB4C  41 80 FF DC */	blt lbl_800FEBE8
/* 800FEC10 000FBB50  4B FE CE A5 */	bl OSInitAlarm
/* 800FEC14 000FBB54  4B FD C1 29 */	bl DSPInit
/* 800FEC18 000FBB58  38 00 00 00 */	li r0, 0
/* 800FEC1C 000FBB5C  3C 60 80 4B */	lis r3, ResetFunctionInfo_4@ha
/* 800FEC20 000FBB60  90 0D 91 9C */	stw r0, __GBAReset@sda21(r13)
/* 800FEC24 000FBB64  38 63 A1 40 */	addi r3, r3, ResetFunctionInfo_4@l
/* 800FEC28 000FBB68  4B FF 16 7D */	bl OSRegisterResetFunction
lbl_800FEC2C:
/* 800FEC2C 000FBB6C  BB 61 00 0C */	lmw r27, 0xc(r1)
/* 800FEC30 000FBB70  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800FEC34 000FBB74  38 21 00 20 */	addi r1, r1, 0x20
/* 800FEC38 000FBB78  7C 08 03 A6 */	mtlr r0
/* 800FEC3C 000FBB7C  4E 80 00 20 */	blr 

.global GBAGetStatus
GBAGetStatus:
/* 800FEC40 000FBB80  7C 08 02 A6 */	mflr r0
/* 800FEC44 000FBB84  90 01 00 04 */	stw r0, 4(r1)
/* 800FEC48 000FBB88  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800FEC4C 000FBB8C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800FEC50 000FBB90  3B E3 00 00 */	addi r31, r3, 0
/* 800FEC54 000FBB94  3C 60 80 4F */	lis r3, __GBA@ha
/* 800FEC58 000FBB98  57 E5 40 2E */	slwi r5, r31, 8
/* 800FEC5C 000FBB9C  38 03 75 C0 */	addi r0, r3, __GBA@l
/* 800FEC60 000FBBA0  7C E0 2A 14 */	add r7, r0, r5
/* 800FEC64 000FBBA4  80 07 00 1C */	lwz r0, 0x1c(r7)
/* 800FEC68 000FBBA8  28 00 00 00 */	cmplwi r0, 0
/* 800FEC6C 000FBBAC  41 82 00 0C */	beq lbl_800FEC78
/* 800FEC70 000FBBB0  38 60 00 02 */	li r3, 2
/* 800FEC74 000FBBB4  48 00 00 34 */	b lbl_800FECA8
lbl_800FEC78:
/* 800FEC78 000FBBB8  38 00 00 00 */	li r0, 0
/* 800FEC7C 000FBBBC  98 07 00 00 */	stb r0, 0(r7)
/* 800FEC80 000FBBC0  3C A0 80 10 */	lis r5, __GBASyncCallback@ha
/* 800FEC84 000FBBC4  38 05 F0 34 */	addi r0, r5, __GBASyncCallback@l
/* 800FEC88 000FBBC8  90 87 00 14 */	stw r4, 0x14(r7)
/* 800FEC8C 000FBBCC  3C 60 80 10 */	lis r3, ShortCommandProc@ha
/* 800FEC90 000FBBD0  38 C3 EB 2C */	addi r6, r3, ShortCommandProc@l
/* 800FEC94 000FBBD4  90 07 00 1C */	stw r0, 0x1c(r7)
/* 800FEC98 000FBBD8  38 7F 00 00 */	addi r3, r31, 0
/* 800FEC9C 000FBBDC  38 80 00 01 */	li r4, 1
/* 800FECA0 000FBBE0  38 A0 00 03 */	li r5, 3
/* 800FECA4 000FBBE4  48 00 05 55 */	bl __GBATransfer
lbl_800FECA8:
/* 800FECA8 000FBBE8  2C 03 00 00 */	cmpwi r3, 0
/* 800FECAC 000FBBEC  41 82 00 08 */	beq lbl_800FECB4
/* 800FECB0 000FBBF0  48 00 00 0C */	b lbl_800FECBC
lbl_800FECB4:
/* 800FECB4 000FBBF4  7F E3 FB 78 */	mr r3, r31
/* 800FECB8 000FBBF8  48 00 03 B1 */	bl __GBASync
lbl_800FECBC:
/* 800FECBC 000FBBFC  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800FECC0 000FBC00  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800FECC4 000FBC04  38 21 00 20 */	addi r1, r1, 0x20
/* 800FECC8 000FBC08  7C 08 03 A6 */	mtlr r0
/* 800FECCC 000FBC0C  4E 80 00 20 */	blr 

.global GBAReset
GBAReset:
/* 800FECD0 000FBC10  7C 08 02 A6 */	mflr r0
/* 800FECD4 000FBC14  90 01 00 04 */	stw r0, 4(r1)
/* 800FECD8 000FBC18  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800FECDC 000FBC1C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800FECE0 000FBC20  3B E3 00 00 */	addi r31, r3, 0
/* 800FECE4 000FBC24  3C 60 80 4F */	lis r3, __GBA@ha
/* 800FECE8 000FBC28  57 E5 40 2E */	slwi r5, r31, 8
/* 800FECEC 000FBC2C  38 03 75 C0 */	addi r0, r3, __GBA@l
/* 800FECF0 000FBC30  7C E0 2A 14 */	add r7, r0, r5
/* 800FECF4 000FBC34  80 07 00 1C */	lwz r0, 0x1c(r7)
/* 800FECF8 000FBC38  28 00 00 00 */	cmplwi r0, 0
/* 800FECFC 000FBC3C  41 82 00 0C */	beq lbl_800FED08
/* 800FED00 000FBC40  38 60 00 02 */	li r3, 2
/* 800FED04 000FBC44  48 00 00 34 */	b lbl_800FED38
lbl_800FED08:
/* 800FED08 000FBC48  38 00 00 FF */	li r0, 0xff
/* 800FED0C 000FBC4C  98 07 00 00 */	stb r0, 0(r7)
/* 800FED10 000FBC50  3C A0 80 10 */	lis r5, __GBASyncCallback@ha
/* 800FED14 000FBC54  38 05 F0 34 */	addi r0, r5, __GBASyncCallback@l
/* 800FED18 000FBC58  90 87 00 14 */	stw r4, 0x14(r7)
/* 800FED1C 000FBC5C  3C 60 80 10 */	lis r3, ShortCommandProc@ha
/* 800FED20 000FBC60  38 C3 EB 2C */	addi r6, r3, ShortCommandProc@l
/* 800FED24 000FBC64  90 07 00 1C */	stw r0, 0x1c(r7)
/* 800FED28 000FBC68  38 7F 00 00 */	addi r3, r31, 0
/* 800FED2C 000FBC6C  38 80 00 01 */	li r4, 1
/* 800FED30 000FBC70  38 A0 00 03 */	li r5, 3
/* 800FED34 000FBC74  48 00 04 C5 */	bl __GBATransfer
lbl_800FED38:
/* 800FED38 000FBC78  2C 03 00 00 */	cmpwi r3, 0
/* 800FED3C 000FBC7C  41 82 00 08 */	beq lbl_800FED44
/* 800FED40 000FBC80  48 00 00 0C */	b lbl_800FED4C
lbl_800FED44:
/* 800FED44 000FBC84  7F E3 FB 78 */	mr r3, r31
/* 800FED48 000FBC88  48 00 03 21 */	bl __GBASync
lbl_800FED4C:
/* 800FED4C 000FBC8C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800FED50 000FBC90  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800FED54 000FBC94  38 21 00 20 */	addi r1, r1, 0x20
/* 800FED58 000FBC98  7C 08 03 A6 */	mtlr r0
/* 800FED5C 000FBC9C  4E 80 00 20 */	blr 

.global OnReset4
OnReset4:
/* 800FED60 000FBCA0  38 00 00 01 */	li r0, 1
/* 800FED64 000FBCA4  90 0D 91 9C */	stw r0, __GBAReset@sda21(r13)
/* 800FED68 000FBCA8  38 60 00 01 */	li r3, 1
/* 800FED6C 000FBCAC  4E 80 00 20 */	blr 
